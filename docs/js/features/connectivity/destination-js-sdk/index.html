<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<script src="https://sap.github.io/cloud-sdk/js/swa.js"></script><title data-react-helmet="true">Destinations in the Cloud SDK for JS | SAP Cloud SDK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Destinations in the Cloud SDK for JS | SAP Cloud SDK"><meta data-react-helmet="true" name="description" content="This article describes how the SDK handles the destination lookup and what the different options to configure destinations are."><meta data-react-helmet="true" property="og:description" content="This article describes how the SDK handles the destination lookup and what the different options to configure destinations are."><meta data-react-helmet="true" name="keywords" content="sap,cloud,sdk,destination,connectivity,JavaScript,TypeScript"><meta data-react-helmet="true" property="og:url" content="https://github.com/SAP/cloud-sdk/cloud-sdk/docs/js/features/connectivity/destination-js-sdk"><link data-react-helmet="true" rel="shortcut icon" href="/cloud-sdk/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/SAP/cloud-sdk/cloud-sdk/docs/js/features/connectivity/destination-js-sdk"><link rel="stylesheet" href="/cloud-sdk/styles.fe4aa536.css">
<link rel="preload" href="/cloud-sdk/styles.151e6bc1.js" as="script">
<link rel="preload" href="/cloud-sdk/runtime~main.36119767.js" as="script">
<link rel="preload" href="/cloud-sdk/main.71335621.js" as="script">
<link rel="preload" href="/cloud-sdk/1.2b938293.js" as="script">
<link rel="preload" href="/cloud-sdk/2.81a387d1.js" as="script">
<link rel="preload" href="/cloud-sdk/3.3918a2fa.js" as="script">
<link rel="preload" href="/cloud-sdk/1be78505.27989569.js" as="script">
<link rel="preload" href="/cloud-sdk/76.0e51ca07.js" as="script">
<link rel="preload" href="/cloud-sdk/06bd7c86.be6ffcf8.js" as="script">
<link rel="preload" href="/cloud-sdk/636145e5.c9d3868f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/cloud-sdk/"><img class="navbar__logo" src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK"><strong class="navbar__title">SAP Cloud SDK</strong></a><a class="navbar__item navbar__link" href="/cloud-sdk/docs/overview/about">Docs</a><a href="https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Support</a><ul class="dropdown__menu"><li><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow</a></li><li><a href="https://github.com/SAP/cloud-sdk/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub JS/TS</a></li><li><a href="https://github.wdf.sap.corp/MA/sdk" target="_blank" rel="noopener noreferrer" class="dropdown__link"> GitHub Java</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Release notes</a><ul class="dropdown__menu"><li><a href="https://help.sap.com/doc/6c02295dfa8f47cf9c08a19f2e172901/1.0/en-US/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Java SDK</a></li><li><a href="https://help.sap.com/doc/2324e9c3b28748a4ae2ad08166d77675/1.0/en-US/js-index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">JS SDK</a></li><li><a href="https://github.com/SAP/cloud-s4-sdk-pipeline/releases" target="_blank" rel="noopener noreferrer" class="dropdown__link">CI/CD Toolkit</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://api.sap.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">SAP API Hub</a><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cloud-sdk/"><img class="navbar__logo" src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK"><strong class="navbar__title">SAP Cloud SDK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/overview/about">Docs</a></li><li class="menu__list-item"><a href="https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist">Support</a><ul class="menu__list"><li class="menu__list-item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="menu__link">Stack Overflow</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-sdk/issues" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub JS/TS</a></li><li class="menu__list-item"><a href="https://github.wdf.sap.corp/MA/sdk" target="_blank" rel="noopener noreferrer" class="menu__link"> GitHub Java</a></li></ul></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist">Release notes</a><ul class="menu__list"><li class="menu__list-item"><a href="https://help.sap.com/doc/6c02295dfa8f47cf9c08a19f2e172901/1.0/en-US/index.html" target="_blank" rel="noopener noreferrer" class="menu__link">Java SDK</a></li><li class="menu__list-item"><a href="https://help.sap.com/doc/2324e9c3b28748a4ae2ad08166d77675/1.0/en-US/js-index.html" target="_blank" rel="noopener noreferrer" class="menu__link">JS SDK</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-s4-sdk-pipeline/releases" target="_blank" rel="noopener noreferrer" class="menu__link">CI/CD Toolkit</a></li></ul></li><li class="menu__list-item"><a href="https://api.sap.com/" target="_blank" rel="noopener noreferrer" class="menu__link">SAP API Hub</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/benefits">Benefits</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/getting-started">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Features</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">OData</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/generate-typed-odata-v2-and-v4-client-for-java">Generate a typed OData client for Java</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/use-typed-odata-v2-and-v4-client-for-java">Type-safe consumption of OData services</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">REST</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/rest/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Released clients</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/rest/clients/scp-workflow-rest-api">SCP Workflow API</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Connectivity</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service">Destinations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Multitenancy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/multi-tenancy/multi-tenancy-thread-context">Thread Context</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Tips &amp; Tricks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/tips-and-tricks/change-log-level">Increase log level</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/sap-cloud-sdk-linux-how-to">SAP Cloud SDK on Linux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/cf-cli">Cloud Foundry CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/cf-deploy">Deploy to Cloud Foundry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/logging-overview">Logging Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/api-reference-java">JavaDoc API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/frequently-asked-questions">FAQ</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">JavaScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Connectivity</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/features/connectivity/proxy-js-sdk">Proxies</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/cloud-sdk/docs/js/features/connectivity/destination-js-sdk">Destinations</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/api-reference-js-ts">JSDoc API reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Continuous Delivery</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/devops/getting-started">Getting started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Community calls</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/community-calls/community-calls-2020">2020</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Related projects</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/related-projects/cloud-application-model">CAP (Cloud Application Model)</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Destinations in the Cloud SDK for JS</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>When developing cloud applications it is necessary to abstract the details where something is retrieved from your code base.
The reasons for this abstraction are manifold: URLs defining a resource may change, in case of a multi customer application the locations depends on the customer, etc..</p><p>On SAP Cloud Platform (SCP) this abstraction is provided by a so called destination object.
This object can be obtained at runtime of the application and contains information like:</p><ul><li>URL</li><li>Authentication</li><li>Proxy Settings (see the <a href="/cloud-sdk/docs/js/features/connectivity/proxy-js-sdk">proxy documentation</a> for more details)<br>...
The Cloud SDK helps you receiving this object and provides also options for local testing outside the SCP.</li></ul><p>The SDK provides a generator to create a client or data model based on a service definition.
For S/4HANA this client has been created and published to npm.
In this <a href="https://developers.sap.com/group.s4sdk-js-cloud-foundry.html">tutorial series</a> a detailed step-by-step guide how to use the data model is presented.
A simple request to receive some business-partners from an S/4 HANA system would look like:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-TypeScript codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">BusinessPartner.requestBuilder()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  .getAll().filter(BusinessPartner.BUSINESS_PARTNER_CATEGORY.equals(&#x27;1&#x27;))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  .top(5)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  .execute(yourDestination);</span></div></div></div></div></div><p>where <code>yourDestination</code> is a <a href="https://sap.github.io/cloud-sdk/api/1.21.0/interfaces/sap_cloud_sdk_core.destination"><code>Destination</code> object</a>.
In principle, you could create a destination object yourself or read it from somewhere and then pass it to the <code>execute()</code> method.
However, this would not be very flexible and convenient as discussed above.
The SDK provides some help for this problem.
If just a destinationName is provided i.e.:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">.execute({&quot;destinationName&quot;: &#x27;myDestination&#x27;})</span></div></div></div></div></div><p>the SDK tries to look the destination up for you.
The details on this process are explained in the next chapters.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-lookup-flow"></a>The Lookup Flow<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-lookup-flow" title="Direct link to heading">#</a></h2><p>When given a destinationName the SDK tries three things to find a destination:</p><ol><li>Checking local environment variables</li><li>Checking a service instance</li><li>Using the destination service</li></ol><p>Once a destination is found, the flow is stopped and the destination is returned.
So local env beats service instance beats destination service in case all contain a destination with the given name.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="local-environment-variable"></a>Local Environment Variable<a aria-hidden="true" tabindex="-1" class="hash-link" href="#local-environment-variable" title="Direct link to heading">#</a></h3><p>This option is present for deployment and testing in a local environment outside the SCP where no destination services are available.
The SDK provides a <code>mockDestinationsEnv(...destinations)</code> method which takes a list of destination objects, transforms it to a JSON array and assigns it to the <code>process.env.destinations</code>.
At runtime, the SDK will check whether a destination with the given is present and use it, if it is.
If a destination with the same name as the one given as <code>destinationName</code> is found it is taken for example:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mockDestinationsEnv({</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  authTokens: [],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  authentication: &#x27;NoAuthentication&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  name: &#x27;TESTINATION&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  isTrustingAllCertificates: false,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  url: &#x27;https://mys4hana.com&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">})</span></div></div></div></div></div><p>would set a destination with name <code>TESTINATION</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="service-instance"></a>Service Instance<a aria-hidden="true" tabindex="-1" class="hash-link" href="#service-instance" title="Direct link to heading">#</a></h3><p>It is possible that the service credentials in other words <code>VCAP_SERVICES</code> environment variables contain a destination.
If you want to use this information the name of the service instance must be provided as destination name.
Currently two services types are supported out of the box <code>business-logging</code> and <code>s4-hana-cloud</code> with the following transformation functions:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">//business-logging</span></div><div class="token-line" style="color:#393A34"><span class="token plain">(serviceBinding) =&gt; { </span></div><div class="token-line" style="color:#393A34"><span class="token plain">    url: serviceBinding.credentials.writeUrl,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    authentication: &#x27;OAuth2ClientCredentials&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    username: serviceBinding.credentials.uaa.clientid,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    password: serviceBinding.credentials.uaa.clientsecret</span></div><div class="token-line" style="color:#393A34"><span class="token plain">};</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">//s4-hana-cloud</span></div><div class="token-line" style="color:#393A34"><span class="token plain">(serviceBinding) =&gt; {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    url: serviceBinding.credentials.URL,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    authentication: &#x27;BasicAuthentication&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    username: serviceBinding.credentials.User,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    password: serviceBinding.credentials.Password</span></div><div class="token-line" style="color:#393A34"><span class="token plain">};</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="destination-service"></a>Destination Service<a aria-hidden="true" tabindex="-1" class="hash-link" href="#destination-service" title="Direct link to heading">#</a></h3><p>This is the normal case in a productive environment.
In order to access the destination service, the SDK will first fetch an access token from the XSUAA service.
This token is used to make a call to the destination service returning the destinations.
Up to now, we have not discussed which destination are returned by the service.</p><p>Depending on the access token issued by the XSUAA this can be either a destination from the provider or subscriber account.
We define an subscriber account as one using an application hosted within a provider account.
In this document we can not explain all details on multi-tenant applications.
Assume a simple example of an application showing the 5 newes business-partner in an S/4 system.
Of course every subscriber/customer will have its own S/4 system and a destination with a defined name is maintained in their account to pointing to that system.</p><p>At runtime the application has to lookup the right destination which is the one related to the subscriber account the request is coming from.
The question is now, how does the service return the right destination?</p><p>For simplicity an optional argument of the destination lookup has been neglected in the beginning:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">.execute({&quot;destinationName&quot;: &#x27;myDestination&#x27;, jwt: &#x27;yourJWT})</span></div></div></div></div></div><p>The <code>jwt</code> argument takes the JSON web token (JWT) issued by an XSUAA as input.<br>
If the JWT was issued by a XSUAA of a subscriber account it is possible to fetch the destination of this account.
For fetching destinations of the provider accounts no JWT is needed because the application has a service binding to the destination service instance. </p><p>There are three selection strategies defined in the SDK: <code>alwaysSubscriber</code>, <code>alwaysProvider</code> and <code>subscriberFirst</code>.
The selection strategy can be passed as an optional argument to the <code>.execute()</code> method.
The default value is <code>subscriberFirst</code>.
The selection strategies can be used to control for which account a destination lookup is attempted:</p><ul><li>alwaysSubscriber: Only try to get destinations from the subscriber account.
A valid JWT is mandatory to receive something.</li><li>alwaysProvider: Only try to get destination from the provider account.
A JWT is not needed.
Even if you present a subscriber JWT the provider destination will be returned if present.</li><li>subscriberFirst: Tries to get from the subscriber first using the JWT.
If no valid JWT is provided or the destination is not found it tries the provider as described for alwaysProvider.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>One aspect has been left out for simplicity.
In principle it is possible to define destinations not only on the account level but also on the destination service level.
These destinations are called <code>instance destinations</code> since they are tied to an service binding called instance on SCP.
In every request these destinations are added to the destinations returned by the destination service.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/SAP/cloud-sdk/edit/documentation/docs/js/features/connectivity/destination.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-06-04T20:20:51.000Z" class="docLastUpdatedAt_1sqk">6/4/2020</time> by <strong>Frank Essenberger</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cloud-sdk/docs/js/features/connectivity/proxy-js-sdk"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Proxies in the Cloud SDK for JS</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cloud-sdk/docs/js/api-reference-js-ts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JS/TS API Reference »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#the-lookup-flow" class="table-of-contents__link">The Lookup Flow</a><ul><li><a href="#local-environment-variable" class="table-of-contents__link">Local Environment Variable</a></li><li><a href="#service-instance" class="table-of-contents__link">Service Instance</a></li><li><a href="#destination-service" class="table-of-contents__link">Destination Service</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/overview/about">SAP Cloud SDK overview</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/java/getting-started">Cloud SDK for Java</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/js/getting-started">Cloud SDK for JS</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/cloud-sdk/docs/js/features/connectivity/docs/devops/getting-started">Cloud SDK for CI/CD</a></li><li class="footer__item"><a href="https://developers.sap.com/tutorial-navigator.html?tag=products:technology-platform/sap-cloud-sdk/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://developers.sap.com/topics/cloud-sdk.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Developers Portal</a></li><li class="footer__item"><a href="https://community.sap.com/topics/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK Community Page</a></li><li class="footer__item"><a href="https://help.sap.com/viewer/product/SAP_CLOUD_SDK/1.0/en-US?task=discover_task" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK on SAP Help</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 SAP SE or an SAP affiliate company. All rights reserved.</div></div></div></footer></div>
<script src="/cloud-sdk/styles.151e6bc1.js"></script>
<script src="/cloud-sdk/runtime~main.36119767.js"></script>
<script src="/cloud-sdk/main.71335621.js"></script>
<script src="/cloud-sdk/1.2b938293.js"></script>
<script src="/cloud-sdk/2.81a387d1.js"></script>
<script src="/cloud-sdk/3.3918a2fa.js"></script>
<script src="/cloud-sdk/1be78505.27989569.js"></script>
<script src="/cloud-sdk/76.0e51ca07.js"></script>
<script src="/cloud-sdk/06bd7c86.be6ffcf8.js"></script>
<script src="/cloud-sdk/636145e5.c9d3868f.js"></script>
</body>
</html>