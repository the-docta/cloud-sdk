<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<link rel="search" type="application/opensearchdescription+xml" title="SAP Cloud SDK" href="/cloud-sdk/opensearch.xml">
<script src="https://sap.github.io/cloud-sdk/js/swa.js"></script><title data-react-helmet="true">Proxies in the SAP Cloud SDK for JavaScript / TypeScript | SAP Cloud SDK</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Proxies in the SAP Cloud SDK for JavaScript / TypeScript | SAP Cloud SDK"><meta data-react-helmet="true" name="description" content="This article describes how the SDK handles the different proxy options and how they are configured."><meta data-react-helmet="true" property="og:description" content="This article describes how the SDK handles the different proxy options and how they are configured."><meta data-react-helmet="true" name="keywords" content="sap,cloud,sdk,proxy,connectivity,JavaScript,TypeScript"><meta data-react-helmet="true" property="og:url" content="https://github.com/SAP/cloud-sdk/cloud-sdk/docs/js/features/connectivity/proxy-js-sdk"><link data-react-helmet="true" rel="shortcut icon" href="/cloud-sdk/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/SAP/cloud-sdk/cloud-sdk/docs/js/features/connectivity/proxy-js-sdk"><link rel="stylesheet" href="/cloud-sdk/styles.d2516806.css">
<link rel="preload" href="/cloud-sdk/styles.03c7c57c.js" as="script">
<link rel="preload" href="/cloud-sdk/runtime~main.12405b4a.js" as="script">
<link rel="preload" href="/cloud-sdk/main.61e57055.js" as="script">
<link rel="preload" href="/cloud-sdk/1.beddbb88.js" as="script">
<link rel="preload" href="/cloud-sdk/2.23dc6944.js" as="script">
<link rel="preload" href="/cloud-sdk/78.b4414720.js" as="script">
<link rel="preload" href="/cloud-sdk/79.29b08490.js" as="script">
<link rel="preload" href="/cloud-sdk/06bd7c86.2960b79e.js" as="script">
<link rel="preload" href="/cloud-sdk/a979aa18.45aa485d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/cloud-sdk/"><img class="navbar__logo" src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK"><strong class="navbar__title">SAP Cloud SDK</strong></a><a class="navbar__item navbar__link" href="/cloud-sdk/docs/overview/about">Docs</a><a href="https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Support</a><ul class="dropdown__menu"><li><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow</a></li><li><a href="https://github.com/SAP/cloud-sdk/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub JS/TS</a></li><li><a href="https://github.wdf.sap.corp/MA/sdk" target="_blank" rel="noopener noreferrer" class="dropdown__link"> GitHub Java</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a activeclassname="navbar__link--active" class="navbar__item navbar__link">Release notes</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cloud-sdk/docs/java/release-notes-sap-cloud-sdk-for-java">Java SDK</a></li><li><a href="https://github.com/SAP/cloud-sdk/releases" target="_blank" rel="noopener noreferrer" class="dropdown__link">JS SDK</a></li><li><a href="https://github.com/SAP/cloud-s4-sdk-pipeline/releases" target="_blank" rel="noopener noreferrer" class="dropdown__link">CI/CD Toolkit</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://api.sap.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">SAP API Hub</a><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cloud-sdk/"><img class="navbar__logo" src="/cloud-sdk/img/logo.svg" alt="SAP Cloud SDK"><strong class="navbar__title">SAP Cloud SDK</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/overview/about">Docs</a></li><li class="menu__list-item"><a href="https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist">Support</a><ul class="menu__list"><li class="menu__list-item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="menu__link">Stack Overflow</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-sdk/issues" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub JS/TS</a></li><li class="menu__list-item"><a href="https://github.wdf.sap.corp/MA/sdk" target="_blank" rel="noopener noreferrer" class="menu__link"> GitHub Java</a></li></ul></li><li class="menu__list-item"><a activeclassname="navbar__link--active" class="menu__link menu__link--sublist">Release notes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cloud-sdk/docs/java/release-notes-sap-cloud-sdk-for-java">Java SDK</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-sdk/releases" target="_blank" rel="noopener noreferrer" class="menu__link">JS SDK</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-s4-sdk-pipeline/releases" target="_blank" rel="noopener noreferrer" class="menu__link">CI/CD Toolkit</a></li></ul></li><li class="menu__list-item"><a href="https://api.sap.com/" target="_blank" rel="noopener noreferrer" class="menu__link">SAP API Hub</a></li><li class="menu__list-item"><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/about">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/overview/benefits">Benefits</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/getting-started">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Features</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">OData</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/generate-typed-odata-v2-and-v4-client-for-java">Generate a typed OData client for Java</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/odata/use-typed-odata-v2-and-v4-client-for-java">Type-safe consumption of OData services</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Connectivity</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/connectivity/sdk-connectivity-destination-service">Destinations</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/bapi-and-rfc/bapi-and-rfc-overview">BAPI/RFC</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Multitenancy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/multi-tenancy/multi-tenancy-thread-context">Thread Context</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Resilience &amp; Caching</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/resilience/resilience">Resilience</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">REST</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/rest/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Released clients</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/features/rest/clients/scp-workflow-rest-api">SCP Workflow API</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/logging-overview">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/manage-dependencies">Dependency Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/cf-deploy">Deploy to Cloud Foundry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/cf-cli">Cloud Foundry CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/tutorial-overview-sdk-java">Tutorials Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/guides/sap-cloud-sdk-linux-how-to">SAP Cloud SDK on Linux</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Video tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/video/video-tutorial-about-getting-started-with-sap-cloudsdk-for-java">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/video/video-tutorial-about-type-safe-client-generator-for-odata-with-sap-cloudsdk-for-java">Generate OData client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/video/video-tutorial-about-connectivity--for-odata-with-sap-cloudsdk-for-java">Destinations and Cloud Connector</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/sdk-java-troubleshooting-frequent-problems">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/release-notes-sap-cloud-sdk-for-java">Release notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/java/frequently-asked-questions">FAQ</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">JavaScript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Features</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">OData</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/features/odata/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/features/odata/generate-typed-odata-v2-and-v4-client-for-javascript-and-typescript">Generate an OData client for JavaScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/features/odata/use-typed-odata-client-for-javascript-and-typescript">Use the OData client</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Connectivity</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/features/connectivity/destination-js-sdk">Destinations</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/cloud-sdk/docs/js/features/connectivity/proxy-js-sdk">Proxies</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/js/guides/migrate-to-open-source-version-of-cloud-sdk-for-javascript-typescript">Migrate to Open Source</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/api-reference-js-ts">JSDoc API reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/release-notes-sap-cloud-sdk-for-javascript-and-typescript">Release notes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/cloud-sdk/docs/js/frequently-asked-questions">FAQ</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Continuous Delivery</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/devops/getting-started">Getting started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/community/community-call">Community Call</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Related projects</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/cloud-sdk/docs/related-projects/cloud-application-model">CAP (Cloud Application Model)</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Proxies in the SAP Cloud SDK for JavaScript / TypeScript</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>The Cloud SDK for JavaScript offers a convenient way to connect to various systems offering public APIs. The most famous one is S/4 HANA which comes in two flavors Cloud and OnPremise. We pre-generate type-safe clients for S/4 HANA APIs publish them to <a href="https://npm.sap.com">https://npm.sap.com</a> for your convenience.</p><p>For different systems like SuccessFactors, C4C, and many others you can generate a type-safe client yourself. All you have to do it look up an API definition on <a href="https://api.sap.com/" target="_blank" rel="noopener noreferrer">SAP API BusinessHub</a> and invoke a generator that supplied with <a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer">SAP Cloud SDK for Javascript</a>. This <a href="https://developers.sap.com/tutorials/cloudsdk-js-generator.html">comprehensive tutorial</a> will guide you through this process step by step.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="making-a-first-api-call"></a>Making a first API call<a aria-hidden="true" tabindex="-1" class="hash-link" href="#making-a-first-api-call" title="Direct link to heading">#</a></h2><p>Once you have a type-safe client generated, this is how you make your first API call. This example uses <strong>BusinessPartner</strong> service from S4/HANA suit.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token maybe-class-name">BusinessPartner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">requestBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">BusinessPartner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">BUSINESS_PARTNER_CATEGORY</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">top</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">yourDestination</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>SDK does a lot of heavy lifting under the hood to take care of complexity so that you can fully concentrate on your App&#x27;s logic. A detailed step by step guide on using a type-safe client is provided in this <a href="https://developers.sap.com/group.s4sdk-js-cloud-foundry.html">tutorial series</a>.</p><p><strong>To name a few things handled by Cloud SDK for Javascript:</strong></p><ul><li>destination fetching</li><li>handling of ETag</li><li>handling of CSRF token</li><li>serializing and deserializing of the request</li><li>and more...</li></ul><p>In this document, we focus on the <strong>proxy</strong> part and explain how proxies are handled by the SDK.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="what-kind-of-proxies-are-there"></a>What kind of Proxies are there?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#what-kind-of-proxies-are-there" title="Direct link to heading">#</a></h2><p>Before we get into the details it is important to have an overview on the different proxy types.
There are two possible types of proxies:</p><ol><li>A local proxy running on the cloud platform used to connect to S/4 HANA OnPremise systems.
The proxy information like host and port are provided by the <a href="https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/daca64dacc6148fcb5c70ed86082ef91.html#loiodaca64dacc6148fcb5c70ed86082ef91__services">connectivity service</a>.
This proxy will be referred to as <code>connectivity proxy</code>. </li><li>A proxy running in some landscape used to make requests to the internet.
This proxy will be referred to as <code>web proxy</code>. </li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="manual-configuration"></a>Manual Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#manual-configuration" title="Direct link to heading">#</a></h2><p>In the <code>execute()</code> you can either give an object containing the destination name or you can configure the full destination manually.
If you provide the destination name the SDK will try to lookup as described <a href="/cloud-sdk/docs/js/features/connectivity/destination-js-sdk">here</a>.</p><p>In productive use the manual configuration will not be useful, but for testing it might be valuable.
The destination object contains a field <code>proxyConfiguration</code> in which you can configure a proxy.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://MyDestinationURL.com&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">proxyConfiguration</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;my.proxy.host.com&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;http&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  headers</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token known-class-name class-name">Proxy</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Authorization</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;yourAuthHeader could be basic or some bearer token&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token constant" style="color:#36acaa">SAP</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Connectivity</span><span class="token operator" style="color:#393A34">-</span><span class="token maybe-class-name">Authentication</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>The SAP-Connectivity-Authentication field contains the JWT issued for the user on application login.
It is mandatory if principal propagation is used i.e. identity propagation from the cloud application to the S/4 system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-automatic-flow"></a>The Automatic Flow<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-automatic-flow" title="Direct link to heading">#</a></h2><p>For productive use you do not want to include a specific proxy configuration in your code.
Here you should let the SDK handle everything.
Hence, you will provide in the <code>.execute()</code> method only the destination name.
This will trigger the destination lookup as described <a href="/cloud-sdk/docs/js/features/connectivity/destination-js-sdk">here</a>.</p><p>The result of the lookup is a destination object which contains a property <code>Proxy Type</code>.
This property can have two vales: <code>Internet</code> and <code>OnPremise</code>:</p><img alt="Destination in CF" src="/cloud-sdk/img/proxyTypeDestination.png"><p>if <code>OnPremise</code> is selected it is assumed that this destination points to an OnPremise S/4 HANA system.
In this case you need the <code>connectivity proxy</code>.
The SDK will request the proxy host and port from the connectivity service and make a request using this proxy.
From there the request will pass via the cloud connector to the S/4 HANA OnPremise system.</p><p>If <code>Internet</code> is selected it is assumed that this destination points to something in the free intern and in most cases no proxy is needed.
However, if a proxy is needed to reach this destination it is configured in the following way.</p><p>The SDK considers the environment variables <code>HTTP_PROXY</code> and <code>HTTPS_PROXY</code>.
The variable <code>HTTP_PROXY</code> is used for destinations using <code>http://</code> in their URL and <code>HTTPS_PROXY</code> for the ones using <code>https://</code>.
<code>https</code> is the default protocol if the protocol is not set in the URL field of the destination.</p><p>The value of the two proxy variables is just a simple string following this pattern:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;protocol&gt;://&lt;user&gt;:&lt;password&gt;?@&lt;host&gt;:&lt;port&gt;</span></div></div></div></div></div><p>The user and password are obviously optional and if they are left out no authentication header is added.
The protocol is also optional and the default value is <code>http</code> since most proxies do not use an encryption layer for communication.
The default for the port is <code>80</code> for <code>http</code> and <code>443</code> for <code>https</code>. Example of a valid values would be:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">http://John:SecurePassword@some.host.com:1234</span></div><div class="token-line" style="color:#393A34"><span class="token plain">https://some.host.com:1234 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> will use </span><span class="token number" style="color:#36acaa">443</span><span class="token plain"> as default</span></div><div class="token-line" style="color:#393A34"><span class="token plain">some.host.com:1234 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> will use http as default</span></div><div class="token-line" style="color:#393A34"><span class="token plain">some.host.com -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> will use http and </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"> as default</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you use any special character in your username or password you need to encode them using <a href="https://en.wikipedia.org/wiki/Percent-encoding" target="_blank" rel="noopener noreferrer">percent encoding</a></p></div></div><p>Since environment variables are a global setting, it might become necessary to exclude some destinations from using the proxy.
This is possible using the <code>NO_PROXY</code> environment variable.
The <code>NO_PROXY</code> variable contains a list of comma separated URLs for which no proxy is used.
Currently now wild cards like <code>*</code> are supported in the list. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="a-word-on-the-used-libraries-and-implementation-details"></a>A Word on the Used Libraries and Implementation Details<a aria-hidden="true" tabindex="-1" class="hash-link" href="#a-word-on-the-used-libraries-and-implementation-details" title="Direct link to heading">#</a></h2><p>The SDK uses <code>axios</code> to execute http requests.
In principle <code>axios</code> should support  <code>web proxies</code> based on the environment variables.
However, we found that request URL using a proxy were not correctly constructed and for the <code>connectivity proxy</code> an entry point was necessary anyhow.</p><p>Hence, the SDK switches off the build in proxy handling by <code>axios</code> completely by using:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    proxy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>in the <code>axios</code> request config.
If a proxy becomes necessary or is configured by the discussed environment variables the SDK builds directly the http or https-agent:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  proxy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  httpAgent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> httpProxAgent || new http.Agent()</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  httpsAgent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> httpsProxyAgent || new https.Agent()</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>and adds them to the axios config. The agents contain the proxy configuration.
The standard <a href="https://www.npmjs.com/package/http-proxy-agent" target="_blank" rel="noopener noreferrer">http and https agents</a> are used.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/SAP/cloud-sdk/edit/documentation/docs/js/features/connectivity/proxy.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-08-05T12:25:43.000Z" class="docLastUpdatedAt_1sqk">8/5/2020</time> by <strong>Henning Heitkötter</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/cloud-sdk/docs/js/features/connectivity/destination-js-sdk"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Destinations in the SAP Cloud SDK for JavaScript / TypeScript</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cloud-sdk/docs/js/guides/migrate-to-open-source-version-of-cloud-sdk-for-javascript-typescript"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Migrate to Open Source version of SDK for JS/TS »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#making-a-first-api-call" class="table-of-contents__link">Making a first API call</a></li><li><a href="#what-kind-of-proxies-are-there" class="table-of-contents__link">What kind of Proxies are there?</a></li><li><a href="#manual-configuration" class="table-of-contents__link">Manual Configuration</a></li><li><a href="#the-automatic-flow" class="table-of-contents__link">The Automatic Flow</a></li><li><a href="#a-word-on-the-used-libraries-and-implementation-details" class="table-of-contents__link">A Word on the Used Libraries and Implementation Details</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/overview/about">SAP Cloud SDK overview</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/java/getting-started">Cloud SDK for Java</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud-sdk/docs/js/getting-started">Cloud SDK for JS</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/cloud-sdk/docs/js/features/connectivity/docs/devops/getting-started">Cloud SDK for CI/CD</a></li><li class="footer__item"><a href="https://developers.sap.com/tutorial-navigator.html?tag=products:technology-platform/sap-cloud-sdk/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK Tutorials</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/sap-cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://developers.sap.com/topics/cloud-sdk.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">SAP Developers Portal</a></li><li class="footer__item"><a href="https://community.sap.com/topics/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK Community Page</a></li><li class="footer__item"><a href="https://help.sap.com/viewer/product/SAP_CLOUD_SDK/1.0/en-US?task=discover_task" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud SDK on SAP Help</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://https://blogs.sap.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/SAP/cloud-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 SAP SE or an SAP affiliate company. All rights reserved.</div></div></div></footer></div>
<script src="/cloud-sdk/styles.03c7c57c.js"></script>
<script src="/cloud-sdk/runtime~main.12405b4a.js"></script>
<script src="/cloud-sdk/main.61e57055.js"></script>
<script src="/cloud-sdk/1.beddbb88.js"></script>
<script src="/cloud-sdk/2.23dc6944.js"></script>
<script src="/cloud-sdk/78.b4414720.js"></script>
<script src="/cloud-sdk/79.29b08490.js"></script>
<script src="/cloud-sdk/06bd7c86.2960b79e.js"></script>
<script src="/cloud-sdk/a979aa18.45aa485d.js"></script>
</body>
</html>